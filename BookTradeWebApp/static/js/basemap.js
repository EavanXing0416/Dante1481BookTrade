// div container: #map: weight = 900, height = 500
// Create the projection and path of the basemap
// the padding of the container is 1rem == 16px
let width = document.querySelector('#map svg').clientWidth;
console.log(width)
let height = document.querySelector('#map svg').clientHeight;
console.log(height)

const projection = d3.geoEquirectangular() //other projections: geoNaturalEarth1()
    .scale(130)
    .translate([width / 2, height / 2])
    .center([0, -3]);

const geoGenerator = d3.geoPath()
    .projection(projection);



// Handling the hover on the basemap
function handleMouseover(e, d) {
    let pixelArea = geoGenerator.area(d);
    let bounds = geoGenerator.bounds(d);
    let centroid = geoGenerator.centroid(d);
    //let measure = geoGenerator.measure(d);

    d3.select('#map .info')
        .text('Current Country: ' + d.properties.name)
        //.text(d.properties.name + ' (path.area = ' + pixelArea.toFixed(1) + ' path.measure = ' + measure.toFixed(1) + ')');

    d3.select('#map .bounding-box rect')
        .attr('x', bounds[0][0])
        .attr('y', bounds[0][1])
        .attr('width', bounds[1][0] - bounds[0][0])
        .attr('height', bounds[1][1] - bounds[0][1]);

    d3.select('#map .centroid')
        .style('display', 'inline')
        .attr('transform', 'translate(' + centroid + ')');
}

function drawBasemap(geojson) {
    let u = d3.select('#map g.basemap')
        .selectAll('path')
        .data(geojson.features)
    u.enter()
        .append('path')
        .attr('d', geoGenerator)
        .on('mouseover', handleMouseover)
        .attr("fill", "#eee")
        .style("stroke", "#ccc");
}

// Request data
d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson")
    .then(function(json) {
        drawBasemap(json)
    });




// Draw trajectories
const svg = d3.select('#map svg')
Promise.all([
    d3.csv("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/data_connectionmap.csv") // Position of circles
    d3.csv("/../data/Dante1481.csv")
    //d3.json("https://raw.githubusercontent.com/holtzy/D3-graph-gallery/master/DATA/world.geojson"), // World shape
]).then(

    function(initialize) {
        let data = initialize[0]
        let Dantedata = initialize[1]
        console.log(Dantedata)

        // Reformat the list of link. Note that columns in csv file are called long1, long2, lat1, lat2
        const link = []
        data.forEach(function(row) {
            source = [+row.long1, +row.lat1]
            target = [+row.long2, +row.lat2]
            topush = { type: "LineString", coordinates: [source, target] }
            link.push(topush)
        })

        console.log(link)

        // Add the path
        svg.selectAll("myPath")
            .data(link)
            .join("path")
            .attr("d", function(d) { return geoGenerator(d) })
            .style("fill", "none")
            .style("stroke", "#69b3a2")
            .style("stroke-width", 1)

    })


//Draw all the locations
var locs = [
    [43.77925, 11.24626],
    [47.36667, 8.55],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [41.82399, -71.41283],
    [41.82399, -71.41283],
    [43.77925, 11.24626],
    [53.55073, 9.99302],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.3085, 13.31036],
    [41.7031, -86.23917],
    [43.77925, 11.24626],
    [48.69096, 9.14062],
    [45.15533665, 10.90486405],
    [44.05507, 5.04813],
    [44.05507, 5.04813],
    [43.77925, 11.24626],
    [52.1994445, 0.1220898930123415],
    [51.50853, -0.12574],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [42.26259, -71.80229],
    [42.25842, -72.57453],
    [42.25842, -72.57453],
    [43.77925, 11.24626],
    [52.1994445, 0.1220898930123415],
    [51.85, -1.36667],
    [52.2, 0.11667],
    [43.77925, 11.24626],
    [55.67594, 12.56553],
    [55.67594, 12.56553],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [39.29038, -76.61219],
    [39.29038, -76.61219],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [39.29038, -76.61219],
    [39.29038, -76.61219],
    [43.77925, 11.24626],
    [40.85216, 14.26811],
    [43.77925, 11.24626],
    [31.152127550000003, 112.87827755536885],
    [41.06997, 1.05949],
    [41.38879, 2.15899],
    [41.38879, 2.15899],
    [43.77925, 11.24626],
    [48.69096, 9.14062],
    [48.13743, 11.57549],
    [47.391991250000004, 19.366904400703994],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [41.89193, 12.51133],
    [41.90225, 12.4533],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [47.391991250000004, 19.366904400703994],
    [41.90225, 12.4533],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [40.85216, 14.26811],
    [43.77925, 11.24626],
    [42.83333, 12.83333],
    [43.77925, 11.24626],
    [52.86195, -3.05497],
    [40.34872, -74.65905],
    [40.34872, -74.65905],
    [43.77925, 11.24626],
    [43.91452, -69.96533],
    [43.91452, -69.96533],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [44.49381, 11.33875],
    [44.46667, 11.43333],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.70853, 10.4036],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.8805, 11.09699],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [51.50853, -0.12574],
    [52.07689, -1.24167],
    [51.50853, -0.12574],
    [52.07689, -1.24167],
    [52.07689, -1.24167],
    [40.71427, -74.00597],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [44.41344, 12.20121],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [40.85216, 14.26811],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [44.64783, 10.92539],
    [44.64783, 10.92539],
    [43.77925, 11.24626],
    [47.391991250000004, 19.366904400703994],
    [38.89511, -77.03637],
    [43.77925, 11.24626],
    [39.12711, -84.51439],
    [41.85003, -87.65005],
    [43.77925, 11.24626],
    [48.85341, 2.3488],
    [53.55073, 9.99302],
    [53.55073, 9.99302],
    [43.77925, 11.24626],
    [51.50853, -0.12574],
    [40.71427, -74.00597],
    [40.09594, -75.12517],
    [38.89511, -77.03637],
    [43.77925, 11.24626],
    [50.63373, 5.56749],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [41.89193, 12.51133],
    [48.85341, 2.3488],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [48.85341, 2.3488],
    [48.85341, 2.3488],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [48.85341, 2.3488],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [31.152127550000003, 112.87827755536885],
    [59.85882, 17.63889],
    [43.77925, 11.24626],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [43.77925, 11.24626],
    [52.52437, 13.41053],
    [52.52437, 13.41053],
    [43.77925, 11.24626],
    [52.52437, 13.41053],
    [52.52437, 13.41053],
    [43.77925, 11.24626],
    [46.21672, 6.18041],
    [43.77925, 11.24626],
    [48.85341, 2.3488],
    [48.85341, 2.3488],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.31822, 11.33064],
    [43.77925, 11.24626],
    [51.05089, 13.73832],
    [51.05089, 13.73832],
    [43.77925, 11.24626],
    [51.05089, 13.73832],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.53197, 12.18687],
    [45.66673, 12.2416],
    [45.66673, 12.2416],
    [43.77925, 11.24626],
    [45.4389, 12.33092],
    [45.4389, 12.33092],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [42.83333, 12.83333],
    [42.35843, -71.05977],
    [42.3751, -71.10561],
    [42.3751, -71.10561],
    [42.35843, -71.05977],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [48.20849, 16.37208],
    [48.13743, 11.57549],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [41.89193, 12.51133],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [43.29695, 5.38107],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [48.20849, 16.37208],
    [43.77925, 11.24626],
    [47.24878, 6.01815],
    [47.24878, 6.01815],
    [43.77925, 11.24626],
    [42.6384261, 12.674297],
    [51.0834196, 10.4234469],
    [51.50853, -0.12574],
    [51.32029, -1.54255],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [34.1214, -118.10646],
    [34.1214, -118.10646],
    [43.77925, 11.24626],
    [49.83826, 24.02324],
    [49.83826, 24.02324],
    [51.1, 17.03333],
    [43.77925, 11.24626],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [40.32118, -79.37948],
    [40.71427, -74.00597],
    [51.50853, -0.12574],
    [37.98376, 23.72784],
    [37.98376, 23.72784],
    [43.77925, 11.24626],
    [45.54694, 13.72944],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [45.43713, 12.33265],
    [45.43713, 12.33265],
    [45.43713, 12.33265],
    [43.77925, 11.24626],
    [42.83333, 12.83333],
    [42.83333, 12.83333],
    [40.71427, -74.00597],
    [40.71427, -74.00597],
    [42.29649, -71.29256],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [44.64783, 10.92539],
    [44.64783, 10.92539],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [48.37154, 10.89851],
    [48.37154, 10.89851],
    [48.37154, 10.89851],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [44.79935, 10.32618],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [55.86515, -4.25763],
    [55.86515, -4.25763],
    [55.86515, -4.25763],
    [55.86515, -4.25763],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [44.40478, 8.94439],
    [44.40478, 8.94439],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.29695, 5.38107],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [40.85216, 14.26811],
    [40.85216, 14.26811],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [40.72586, 8.55552],
    [40.72586, 8.55552],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.70853, 10.4036],
    [43.70853, 10.4036],
    [43.77925, 11.24626],
    [43.72123, 11.76642],
    [43.72123, 11.76642],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [44.46667, 11.43333],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [48.2082, 16.37169],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.19205, 9.15917],
    [45.19205, 9.15917],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.4299, 10.98444],
    [45.4299, 10.98444],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [56.59766, 24.20763],
    [56.946, 24.10589],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.69876, 11.81474],
    [43.61995, 11.47191],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [41.90225, 12.4533],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [41.89193, 12.51133],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [44.30905, 8.47715],
    [43.84369, 10.50447],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.65975, 11.18494],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [41.89193, 12.51133],
    [41.90225, 12.4533],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [48.69096, 9.14062],
    [43.77925, 11.24626],
    [44.49381, 11.33875],
    [42.3751, -71.10561],
    [42.3751, -71.10561],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [38.13205, 13.33561],
    [38.13205, 13.33561],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [42.3751, -71.10561],
    [43.77925, 11.24626],
    [40.85216, 14.26811],
    [52.28107, -1.00095],
    [40.71427, -74.00597],
    [40.71427, -74.00597],
    [43.77925, 11.24626],
    [45.4389, 12.33092],
    [45.4389, 12.33092],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [42.83333, 12.83333],
    [51.7311, 0.67463],
    [51.50853, -0.12574],
    [37.98376, 23.72784],
    [37.98376, 23.72784],
    [43.77925, 11.24626],
    [44.40478, 8.94439],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [50.85045, 4.34878],
    [44.29546, 9.99271],
    [43.77925, 11.24626],
    [45.46427, 9.18951],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [38.13205, 13.33561],
    [43.77925, 11.24626],
    [42.3751, -71.10561],
    [42.3751, -71.10561],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [52.37924, 0.78599],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [57.1718, -2.40945],
    [42.35843, -71.05977],
    [42.35843, -71.05977],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [52.28107, -1.00095],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [43.77925, 11.24626],
    [50.04937, 10.22175],
    [40.71427, -74.00597],
    [43.77925, 11.24626],
    [43.79359, 11.82031],
    [43.72123, 11.76642],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [48.85341, 2.3488],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [40.42435, 15.07981],
    [41.90225, 12.4533],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [36.43556, 28.22199],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [41.89193, 12.51133],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [48.69096, 9.14062],
    [48.85341, 2.3488],
    [48.85341, 2.3488],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [41.89193, 12.51133],
    [41.89193, 12.51133],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [55.95206, -3.19648],
    [55.95206, -3.19648],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [45.46427, 9.18951],
    [34.05223, -118.24368],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [40.71427, -74.00597],
    [42.71202, -73.20372],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.54427, 10.32615],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.43713, 12.33265],
    [45.43713, 12.33265],
    [43.77925, 11.24626],
    [31.152127550000003, 112.87827755536885],
    [43.1561681, -75.8449946],
    [40.11059, -88.20727],
    [43.77925, 11.24626],
    [45.43713, 12.33265],
    [51.75222, -1.25596],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [50.85045, 4.34878],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [41.89193, 12.51133],
    [40.91149, -73.78235],
    [50.85045, 4.34878],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [59.93863, 30.31413],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.4738, 11.02975],
    [51.50853, -0.12574],
    [52.37302, 4.89856],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.46416, 9.19199],
    [45.46416, 9.19199],
    [45.46416, 9.19199],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [46.1100487, 5.8240179],
    [40.71427, -74.00597],
    [40.71427, -74.00597],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [52.0389, 0.73117],
    [51.50853, -0.12574],
    [51.47411, -0.91212],
    [41.56232, -72.65065],
    [43.77925, 11.24626],
    [48.85341, 2.3488],
    [41.89193, 12.51133],
    [45.46427, 9.18951],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.46427, 9.18951],
    [44.40478, 8.94439],
    [44.40478, 8.94439],
    [43.77925, 11.24626],
    [41.30815, -72.92816],
    [43.77925, 11.24626],
    [42.44063, -76.49661],
    [43.77925, 11.24626],
    [34.09668, -117.71978],
    [43.77925, 11.24626],
    [39.16533, -86.52639],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [51.50853, -0.12574],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.31822, 11.33064],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [51.05089, 13.73832],
    [51.05089, 13.73832],
    [51.05089, 13.73832],
    [55.75222, 37.61556],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [41.89193, 12.51133],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [48.13743, 11.57549],
    [45.44694, 8.62118],
    [45.44694, 8.62118],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [51.05089, 13.73832],
    [52.37052, 9.73322],
    [52.24067, 0.50415],
    [48.20849, 16.37208],
    [53.9, 27.56667],
    [43.77925, 11.24626],
    [48.69096, 9.14062],
    [31.152127550000003, 112.87827755536885],
    [31.152127550000003, 112.87827755536885],
    [53.22662, -1.62576],
    [53.21667, -1.6],
    [43.77925, 11.24626],
    [48.13743, 11.57549],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.46427, 9.18951],
    [51.18539, 6.44172],
    [50.93333, 6.95],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [31.152127550000003, 112.87827755536885],
    [45.07049, 7.68682],
    [46.20222, 6.14569],
    [43.77925, 11.24626],
    [42.83333, 12.83333],
    [45.43713, 12.33265],
    [52.16045, -0.70312],
    [42.35843, -71.05977],
    [42.3751, -71.10561],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.70853, 10.4036],
    [45.15533665, 10.90486405],
    [50.11552, 8.68417],
    [45.64953, 13.77678],
    [41.89193, 12.51133],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [48.68439, 6.18496],
    [48.89731, 9.19161],
    [48.77667, 9.1775],
    [43.77925, 11.24626],
    [45.4389, 12.33092],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [31.152127550000003, 112.87827755536885],
    [-22.90642, -43.18223],
    [-22.90642, -43.18223],
    [43.77925, 11.24626],
    [52.1994445, 0.1220898930123415],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [43.77925, 11.24626],
    [51.05089, 13.73832],
    [55.75222, 37.61556],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [51.48165, -0.28749],
    [51.50853, -0.12574],
    [52.1994445, 0.1220898930123415],
    [52.2, 0.11667],
    [43.77925, 11.24626],
    [51.05089, 13.73832],
    [51.33962, 12.37129],
    [55.75222, 37.61556],
    [43.77925, 11.24626],
    [59.93863, 30.31413],
    [55.75222, 37.61556],
    [55.75222, 37.61556],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [44.32588, 7.67431],
    [51.50853, -0.12574],
    [37.80437, -122.2708],
    [37.80437, -122.2708],
    [43.77925, 11.24626],
    [44.23836595, 9.691232634547537],
    [44.23836595, 9.691232634547537],
    [42.88052, -8.54569],
    [43.77925, 11.24626],
    [51.50853, -0.12574],
    [51.50853, -0.12574],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [43.77925, 11.24626],
    [51.50853, -0.12574],
    [52.2, 0.11667],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [40.85216, 14.26811],
    [52.1994445, 0.1220898930123415],
    [47.39484, 0.70398],
    [47.39484, 0.70398],
    [43.77925, 11.24626],
    [52.06866, 4.28635],
    [52.06866, 4.28635],
    [43.77925, 11.24626],
    [55.99089, -3.39847],
    [51.75222, -1.25596],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [41.89193, 12.51133],
    [43.77925, 11.24626],
    [45.46427, 9.18951],
    [48.69096, 9.14062],
    [52.0389, 0.73117],
    [51.50853, -0.12574],
    [38.02931, -78.47668],
    [45.02819, 11.64265],
    [37.42411, -122.16608],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [51.50853, -0.12574],
    [51.8485, -1.35132],
    [40.71427, -74.00597],
    [40.71427, -74.00597],
    [48.85341, 2.3488],
    [35.6895, 139.69171],
    [35.6895, 139.69171],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [45.15533665, 10.90486405],
    [43.46276, 11.88068],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [43.84369, 10.50447],
    [43.77925, 11.24626],
    [45.15533665, 10.90486405],
    [45.07049, 7.68682]
];
//console.log(projection(locs[1]));
//console.log(locs);

//var dots = 
svg.select('#map .locations')
    .selectAll("circle")
    .data(locs)
    .enter().append("circle")
    //.join("circle")
    .attr("cx", function(d) {
        //console.log(projection(d))
        return projection([d[1], d[0]])[0];
    })
    .attr("cy", function(d) { return projection([d[1], d[0]])[1]; })
    .attr("r", 2)
    .style("fill", "69b3a2")
    .attr("stroke", "#69b3a2")
    .attr("stroke-width", 0.5)
    .attr("fill-opacity", 0.3);